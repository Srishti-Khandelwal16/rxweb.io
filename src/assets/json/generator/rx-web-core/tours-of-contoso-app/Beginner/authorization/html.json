{"rightSidebarLinks":[{"id":"authorization","title":"Authorization","subLink":null},{"id":"authorization","title":"Authorization","subLink":[{"title":"Step 1","id":"step1","thirdLevelLink":[]},{"title":"Step 2","id":"step2","thirdLevelLink":[]}]}],"title":"Authorization","description":"","validatorType":"decorators","validationTypeTitle":"Decorators","type":"simple","gitDocPath":"https://github.com/rxweb/rxweb.io/edit/master/docs/rx-web-core/tours-of-contoso-app/beginner/authorization.md","category":"rxwebcore","subCategory":"","linkTitle":"overview","tabArray":{},"innerHtml":null,"htmlContent":"<div class='row page-section' id= 'authorization'>\r\n<div class='col-lg-12'>\r\n<h1 class=title-level-1>Authorization</h1>\r\n\r\n<p class='showHideElement' >Authorization refers to determination of access rights of a particular user. In our application we will implement authorization using Role Based Authorization mechanism.</p>\r\n<p class='showHideElement' >Once the user gets logged in to the Contoso Application, based upon the user information the access of the application modules are known through the role of the user. For example : If admin user has logged in, it will have read and write permissions to the departments module and if the student user has logged in, it will have only read access to the department module.  </p>\r\n<p class='showHideElement' >Lets see how this is maintained in the application. </p>\r\n<p class='showHideElement' >In our <span class='highlighted'>ContosoApplicationDb</span> database after the cli command for database setup is executed, The tables which are generated will include tables of Roles, RolePermissions, ApplicationModules, ModuleMasters, User and UserRoles. We will specify the application modules of the users and their roles into their respective tables. Let's understand how the flow is carried on.</p>\r\n</div></div>\r\n<div class='row page-section' id= 'step1'>\r\n<div class='col-lg-12'>\r\n<h2 class=title-level-2>Step 1</h2>\r\n\r\n<p class='showHideElement' >Insterting values into the database for user role permissions.</p>\r\n<strong>ModuleMasters Table: </strong>\r\n<p class='showHideElement' >This table contains application modules which are defined during the start of the project.</p>\r\n<table class=\"table table-bordered\">\r\n<tr><th>ModuleMasterId</th><th>ModuleMasterName</th><th>StatusId</th></tr>\r\n<tr><td>1</td><td>Student</td><td>1</td></tr>\r\n</table>\r\n<strong>ApplicationModules Table:</strong>\r\n<p class='showHideElement' >A master module may have different modules which can be considered as child modules or sub-modules which are mapped into this table. Here the <span class='highlighted'>ParentApplicationModuleId</span> refers as a reference of the ModuleMasters table.</p>\r\n<table class=\"table table-bordered\">\r\n<tr><th>ApplicationModuleId</th><th>ModuleMasterId</th><th>ParentApplicationModuleId</th></tr>\r\n<tr><td>1</td><td>1</td><td>1</td></tr>\r\n</table>\r\n<strong>Roles Table:</strong>\r\n<p class='showHideElement' >It contains various roles of the application which will be assigned to every user accessing the application.</p>\r\n<table class=\"table table-bordered\">\r\n<tr><th>RoleId</th><th>RoleName</th></tr>\r\n<tr><td>1</td><td>Admin</td></tr>\r\n<tr><td>2</td><td>Student</td></tr>\r\n</table>\r\n<strong>RolePermissions Table:</strong>\r\n<p class='showHideElement' >The roles and their respective permissions are stored in this table with its respective permissions of the read and write actions. If the user has one or more roles defined in the application, the permission priority is set accordingly for adjuding access rights.</p>\r\n<table class=\"table table-bordered\">\r\n<tr><th>RolePermissionId</th><th>RoleId</th><th>CanView</th><th>CanAdd</th><th>CanEdit</th><th>CanDelete</th><th>PermissionPriority</th></tr>\r\n<tr><td>1</td><td>1</td><td>True</td><td>True</td><td>True</td><td>True</td><td>NULL</td></tr>\r\n<tr><td>2</td><td>2</td><td>True</td><td>False</td><td>False</td><td>False</td><td>NULLs</td></tr>\r\n</table>\r\n<strong>UserRoles Table : </strong>\r\n<p class='showHideElement' >This table contains mapping of users and their respective roles.</p>\r\n<table class=\"table table-bordered\">\r\n<tr><th>UserRoleId</th><th>UserId</th><th>RoleId</th></tr>\r\n<tr><td>1</td><td>1</td><td>1</td></tr>\r\n</table>\r\n</div></div>\r\n<div class='row page-section' id= 'step2'>\r\n<div class='col-lg-12'>\r\n<h2 class=title-level-2>Step 2</h2>\r\n\r\n<p class='showHideElement' >Authorizing The Controller</p>\r\n<strong>access </strong>\r\n<p class='showHideElement' >To authorize the controller, <span class='highlighted'>[access]</span> is used above the controller class along with its application module id.</p>\r\n<p class='showHideElement' >To add authorization in the controller using access, the following command is used:</p>\r\n<blockquote class='showHideElement' ><p>rxwebcore --controller --basic --main Students --uow Master --access 1</p></blockquote>\r\n<p class='showHideElement' >In this command <span class='highlighted'>Students</span> is the controller name, <span class='highlighted'>Master</span> is the module and 1 is the application module Id retrieved from the database. </p>\r\n<div class='model-ts'><pre><code>\r\n    [ApiController]\r\n    [Route(\"api/[controller]\")]\r\n\t[Access(1)]\r\n\tpublic class StudentsController : BaseController<Student,vStudent,vStudentRecord>\r\n    {\r\n        public StudentsController(IMasterUow uow):base(uow) {}\r\n    }\r\n</code></pre></div>\r\n<strong>AllowAnonymous</strong>\r\n<p class='showHideElement' >When you want to by-pass the controller without any authorization when you want any user to access the specific action. For example: If you have a scenario where you want to by-pass the post action of registeration.</p>\r\n<p class='showHideElement' >As per the below scenario it will allow any user to access this <span class='highlighted'>Post</span> method and allow new user to register.  </p>\r\n<div class='model-ts'><pre><code>\r\n   [ApiController]\r\n    [Route(\"api/[controller]\")]\r\n\t[AllowAnonymous]\r\n\tpublic class StudentsController : BaseController<Student,vStudent,vStudentRecord>\r\n    {\r\n        public StudentsController(IMasterUow uow):base(uow) {}\r\n    }\r\n</code></pre></div>\r\n</div></div>\r\n"}